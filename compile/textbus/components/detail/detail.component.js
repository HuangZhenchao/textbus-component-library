import { ContentType, defineComponent, Slot, Translator, useContext, useSlots, useState, VElement, VTextNode } from '@textbus/core';
/*
  export interface detailState{
    presentation:Slot,
    features:Slot,
    version:Slot,
    installWay:Slot
  }
*/
export const detailComponent = defineComponent({
    type: ContentType.BlockComponent,
    name: 'detailComponent',
    setup(data) {
        const injector = useContext();
        const translator = injector.get(Translator);
        let state = {};
        const slots = useSlots(data.slots || [new Slot([ContentType.Text]), new Slot([ContentType.Text]), new Slot([ContentType.Text]), new Slot([ContentType.Text])]);
        const changeController = useState(state);
        //useState({fill:false,type:'info',slot:slots.toJSON()})
        changeController.onChange.subscribe(newState => {
            state = newState;
            console.log('changeController', state);
        });
        return {
            render(isOutputMode, slotRender) {
                const textItem = ['产品介绍', '产品特性', '支持版本', '安装方式'];
                const createItem = function (index) {
                    const icon = VElement.createElement('i', { class: '' });
                    const title = new VElement('span', {
                        class: "detail-item-title"
                    }, [icon, new VTextNode(textItem[index])]);
                    const Item = VElement.createElement('div', {
                        class: "detail-item"
                    }, [title, slotRender(slots.get(index), () => {
                            return VElement.createElement("div", { class: "detail-item-content" });
                        })]);
                    return Item;
                };
                const vNode = VElement.createElement('div', {
                    class: 'tb-product-detail',
                }, slots.toArray().map((value, index) => {
                    console.log(index);
                    return createItem(index);
                }));
                console.log(vNode);
                return vNode;
            }
        };
    }
});
export const detailComponentLoader = {
    component: detailComponent,
    match(element) {
        return element.tagName.toLowerCase() === 'div' && element.className.includes('tb-product-detail');
    },
    read(element, context, slotParser) {
        let slots = [];
        element.querySelectorAll('.detail-item-content').forEach(el => {
            const slot = new Slot([ContentType.Text]);
            slotParser(slot, el);
            slots.push(slot);
        });
        return detailComponent.createInstance(context, { slots: slots });
    },
    resources: {
        styles: [`
  .tb-product-detail {
    padding: 10px 15px;
    border-radius: 6px;
    border: 1px solid #e9eaec;
    background-color: #f8f8f9;
    margin-top: 1em;
    margin-bottom: 1em
  }
  .detail-item{

  }
  .detail-item-content{
    min-height:100px;
  }
  .detail-item-title{

  }
    `
        ]
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGV0YWlsLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3RleHRidXMvY29tcG9uZW50cy9kZXRhaWwvZGV0YWlsLmNvbXBvbmVudC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUdILFdBQVcsRUFDWCxlQUFlLEVBQ2YsSUFBSSxFQUdKLFVBQVUsRUFBRSxVQUFVLEVBQ3RCLFFBQVEsRUFBRSxRQUFRLEVBQ2xCLFFBQVEsRUFBRSxTQUFTLEVBQ3BCLE1BQU0sZUFBZSxDQUFBO0FBUXhCOzs7Ozs7O0VBT0U7QUFDQSxNQUFNLENBQUMsTUFBTSxlQUFlLEdBQUcsZUFBZSxDQUF5QjtJQUNyRSxJQUFJLEVBQUUsV0FBVyxDQUFDLGNBQWM7SUFDaEMsSUFBSSxFQUFFLGlCQUFpQjtJQUV2QixLQUFLLENBQUMsSUFBeUI7UUFDN0IsTUFBTSxRQUFRLEdBQUcsVUFBVSxFQUFFLENBQUM7UUFDOUIsTUFBTSxVQUFVLEdBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUMxQyxJQUFJLEtBQUssR0FBQyxFQUFFLENBQUE7UUFDWixNQUFNLEtBQUssR0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBQyxJQUFJLElBQUksQ0FBQyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFDLElBQUksSUFBSSxDQUFDLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQ3ZKLE1BQU0sZ0JBQWdCLEdBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3ZDLHdEQUF3RDtRQUN4RCxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLFFB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SixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICAgIENvbXBvbmVudEluc3RhbmNlLFxyXG4gICAgQ29tcG9uZW50TWV0aG9kcyxcclxuICAgIENvbnRlbnRUeXBlLFxyXG4gICAgZGVmaW5lQ29tcG9uZW50LFxyXG4gICAgU2xvdCxcclxuICAgIFNsb3RMaXRlcmFsLFxyXG4gICAgU2xvdFJlbmRlciwgU2VsZWN0aW9uLFxyXG4gICAgVHJhbnNsYXRvciwgdXNlQ29udGV4dCxcclxuICAgIHVzZVNsb3RzLCB1c2VTdGF0ZSxcclxuICAgIFZFbGVtZW50LCBWVGV4dE5vZGUsIENvbXBvbmVudERhdGFcclxuICB9IGZyb20gJ0B0ZXh0YnVzL2NvcmUnXHJcbiAgaW1wb3J0IHtDb21wb25lbnRMb2FkZXIsIGNyZWF0ZUVsZW1lbnQsIFNsb3RQYXJzZXJ9IGZyb20gJ0B0ZXh0YnVzL2Jyb3dzZXInXHJcbiAgaW1wb3J0IHsgSW5qZWN0b3IgfSBmcm9tICdAdGFuYm8vZGknXHJcbiAgXHJcblxyXG4gIGV4cG9ydCBpbnRlcmZhY2UgZGV0YWlsU3RhdGV7XHJcbiAgICB0ZXh0Olsn5Lqn5ZOB5LuL57uNJywn5Lqn5ZOB54m55oCnJywn5pSv5oyB54mI5pysJywn5a6J6KOF5pa55byPJ11cclxuICB9XHJcbi8qXHJcbiAgZXhwb3J0IGludGVyZmFjZSBkZXRhaWxTdGF0ZXtcclxuICAgIHByZXNlbnRhdGlvbjpTbG90LFxyXG4gICAgZmVhdHVyZXM6U2xvdCxcclxuICAgIHZlcnNpb246U2xvdCxcclxuICAgIGluc3RhbGxXYXk6U2xvdFxyXG4gIH1cclxuKi9cclxuICBleHBvcnQgY29uc3QgZGV0YWlsQ29tcG9uZW50ID0gZGVmaW5lQ29tcG9uZW50PENvbXBvbmVudE1ldGhvZHMsIG51bGw+KHtcclxuICAgIHR5cGU6IENvbnRlbnRUeXBlLkJsb2NrQ29tcG9uZW50LFxyXG4gICAgbmFtZTogJ2RldGFpbENvbXBvbmVudCcsXHJcblxyXG4gICAgc2V0dXAoZGF0YTogQ29tcG9uZW50RGF0YTxudWxsPik6IENvbXBvbmVudE1ldGhvZHMge1xyXG4gICAgICBjb25zdCBpbmplY3RvciA9IHVzZUNvbnRleHQoKTtcclxuICAgICAgY29uc3QgdHJhbnNsYXRvcj1pbmplY3Rvci5nZXQoVHJhbnNsYXRvcik7XHJcbiAgICAgIGxldCBzdGF0ZT17fSBcclxuICAgICAgY29uc3Qgc2xvdHM9dXNlU2xvdHMoZGF0YS5zbG90c3x8W25ldyBTbG90KFtDb250ZW50VHlwZS5UZXh0XSksbmV3IFNsb3QoW0NvbnRlbnRUeXBlLlRleHRdKSxuZXcgU2xvdChbQ29udGVudFR5cGUuVGV4dF0pLG5ldyBTbG90KFtDb250ZW50VHlwZS5UZXh0XSldKVxyXG4gICAgICBjb25zdCBjaGFuZ2VDb250cm9sbGVyPXVzZVN0YXRlKHN0YXRlKTtcclxuICAgICAgLy91c2VTdGF0ZSh7ZmlsbDpmYWxzZSx0eXBlOidpbmZvJyxzbG90OnNsb3RzLnRvSlNPTigpfSlcclxuICAgICAgY2hhbmdlQ29udHJvbGxlci5vbkNoYW5nZS5zdWJzY3JpYmUobmV3U3RhdGU9PntcclxuICAgICAgICBzdGF0ZT1uZXdTdGF0ZTtcclxuICAgICAgICBjb25zb2xlLmxvZygnY2hhbmdlQ29udHJvbGxlcicsc3RhdGUpXHJcbiAgICAgIH0pXHJcbiAgXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVuZGVyKGlzT3V0cHV0TW9kZTogYm9vbGVhbiwgc2xvdFJlbmRlcjogU2xvdFJlbmRlcik6IFZFbGVtZW50IHtcclxuICAgICAgICAgIGNvbnN0IHRleHRJdGVtPVsn5Lqn5ZOB5LuL57uNJywn5Lqn5ZOB54m55oCnJywn5pSv5oyB54mI5pysJywn5a6J6KOF5pa55byPJ107XHJcbiAgICAgICAgICBjb25zdCBjcmVhdGVJdGVtPWZ1bmN0aW9uKGluZGV4KXtcclxuICAgICAgICAgICAgY29uc3QgaWNvbj1WRWxlbWVudC5jcmVhdGVFbGVtZW50KCdpJyx7Y2xhc3M6Jyd9KTsgICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgdGl0bGU9bmV3IFZFbGVtZW50KCdzcGFuJyx7XHJcbiAgICAgICAgICAgICAgY2xhc3M6XCJkZXRhaWwtaXRlbS10aXRsZVwiXHJcbiAgICAgICAgICAgIH0sW2ljb24sbmV3IFZUZXh0Tm9kZSh0ZXh0SXRlbVtpbmRleF0pXSk7XHJcbiAgICAgICAgICAgIGNvbnN0IEl0ZW09VkVsZW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyx7XHJcbiAgICAgICAgICAgICAgY2xhc3M6XCJkZXRhaWwtaXRlbVwiXHJcbiAgICAgICAgICAgIH0sW3RpdGxlLHNsb3RSZW5kZXIoc2xvdHMuZ2V0KGluZGV4KSEsKCk9PntcclxuICAgICAgICAgICAgICAgIHJldHVybiA8ZGl2IGNsYXNzPVwiZGV0YWlsLWl0ZW0tY29udGVudFwiLz5cclxuICAgICAgICAgICAgfSldKTtcclxuICAgICAgICAgICAgcmV0dXJuIEl0ZW07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjb25zdCB2Tm9kZT1WRWxlbWVudC5jcmVhdGVFbGVtZW50KCdkaXYnLHtcclxuICAgICAgICAgICAgY2xhc3M6J3RiLXByb2R1Y3QtZGV0YWlsJyxcclxuICAgICAgICAgIH0sc2xvdHMudG9BcnJheSgpLm1hcCgodmFsdWUsaW5kZXgpPT57XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGluZGV4KVxyXG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlSXRlbShpbmRleClcclxuICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgY29uc29sZS5sb2codk5vZGUpXHJcbiAgICAgICAgICByZXR1cm4gdk5vZGVcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KVxyXG4gIFxyXG5leHBvcnQgY29uc3QgZGV0YWlsQ29tcG9uZW50TG9hZGVyOiBDb21wb25lbnRMb2FkZXIgPSB7XHJcbiAgICBjb21wb25lbnQ6IGRldGFpbENvbXBvbmVudCxcclxuICAgIFxyXG4gICAgbWF0Y2goZWxlbWVudDogSFRNTEVsZW1lbnQpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuIGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnZGl2JyAmJiBlbGVtZW50LmNsYXNzTmFtZS5pbmNsdWRlcygndGItcHJvZHVjdC1kZXRhaWwnKVxyXG4gICAgfSxcclxuICAgIHJlYWQoZWxlbWVudDogSFRNTEVsZW1lbnQsIGNvbnRleHQ6IEluamVjdG9yLCBzbG90UGFyc2VyOiBTbG90UGFyc2VyKTogQ29tcG9uZW50SW5zdGFuY2Uge1xyXG4gICAgICBsZXQgc2xvdHM6U2xvdFtdPVtdO1xyXG4gICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kZXRhaWwtaXRlbS1jb250ZW50JykuZm9yRWFjaChlbD0+e1xyXG4gICAgICAgIGNvbnN0IHNsb3Q9bmV3IFNsb3QoW0NvbnRlbnRUeXBlLlRleHRdKVxyXG4gICAgICAgIHNsb3RQYXJzZXIoc2xvdCxlbCBhcyBIVE1MRWxlbWVudClcclxuICAgICAgICBzbG90cy5wdXNoKHNsb3QpXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICByZXR1cm4gZGV0YWlsQ29tcG9uZW50LmNyZWF0ZUluc3RhbmNlKGNvbnRleHQsIHtzbG90czpzbG90c30pXHJcbiAgICB9LFxyXG4gICAgcmVzb3VyY2VzOiB7XHJcbiAgICAgIHN0eWxlczogW2BcclxuICAudGItcHJvZHVjdC1kZXRhaWwge1xyXG4gICAgcGFkZGluZzogMTBweCAxNXB4O1xyXG4gICAgYm9yZGVyLXJhZGl1czogNnB4O1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgI2U5ZWFlYztcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY4Zjk7XHJcbiAgICBtYXJnaW4tdG9wOiAxZW07XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxZW1cclxuICB9XHJcbiAgLmRldGFpbC1pdGVte1xyXG5cclxuICB9XHJcbiAgLmRldGFpbC1pdGVtLWNvbnRlbnR7XHJcbiAgICBtaW4taGVpZ2h0OjEwMHB4O1xyXG4gIH1cclxuICAuZGV0YWlsLWl0ZW0tdGl0bGV7XHJcblxyXG4gIH1cclxuICAgIGBcclxuICAgICAgXVxyXG4gICAgfSxcclxufVxyXG4gIFxyXG4gICJdfQ==